html, body { height: 100%; margin: 0; padding: 0; width: 100vw; background: #f6f9fb; }
body { height: 100vh; min-height: 100vh; width: 100vw; font-family: Arial, sans-serif; }
.container { width: 100vw; height: 100vh; min-height: 100vh; min-width: 100vw; background: #fff; padding: 32px 10vw 16px 10vw; box-sizing: border-box; display: flex; flex-direction: column; justify-content: flex-start; overflow-y: auto; scroll-behavior: smooth; }
h2 { text-align: center; margin-bottom: 20px; font-size: 1.9em; }
.field, .question { margin-bottom: 20px; }
input[type="text"], input[type="number"], select { width: 100%; padding: 8px 11px; border: 1px solid #ddd; border-radius: 7px; margin-top: 5px; margin-bottom: 8px; font-size: 16px; box-sizing: border-box; }
label { font-size: 1em; }
.step-btns { display: flex; justify-content: flex-end; gap: 10px; }
button { padding: 12px 0; font-size: 17px; border: none; border-radius: 8px; background: #2196f3; color: #fff; cursor: pointer; transition: background 0.2s; width: 100%; margin-top: 14px; }
button[disabled] { opacity: 0.6; cursor: not-allowed; }
button:hover:not([disabled]) { background: #176cb8; }
#message { margin-top: 22px; text-align: center; font-size: 18px; color: #28a745; }
/* Card-based TIPI scale */
.tipi-cards { display:flex; flex-direction:column; gap:14px; margin-top:12px; }
.qcard { border:1px solid #e6edf6; border-radius:16px; background:#ffffff; box-shadow: 0 6px 20px rgba(13,60,97,.06); padding:14px 14px 12px; }
.qtitle { color:#11253b; font-weight:700; line-height:1.35; }
.qnum { color:#6b7f94; margin-right:6px; }
.rev-tag { display:inline-block; margin-left:8px; padding:2px 8px; font-size:.72rem; border-radius:999px; color:#1a5fb4; background:#e9f2ff; border:1px solid #d8e8ff; font-weight:600; }

.scale7 { display:grid; grid-template-columns: repeat(7, minmax(0, 1fr)); gap:10px; margin-top:12px; }
.pill { position:relative; display:block; cursor:pointer; }
.pill input { position:absolute; inset:0; opacity:0; pointer-events:none; }
.pill .box { display:flex; flex-direction:column; align-items:center; gap:6px; padding:10px 6px; border:1px solid #cfe0f1; border-radius:10px; background:#f8fbff; transition: all .15s ease; min-height:64px; }
.pill .n { font-weight:800; font-size:1rem; color:#184877; }
.pill .lab { font-size:.78rem; color:#5a6f84; text-align:center; line-height:1.1; }
.pill:hover .box { border-color:#9ec7ef; box-shadow: 0 2px 10px rgba(0,0,0,.04); }
.pill input:checked + .box { border-color:#2196f3; background:#eaf4ff; box-shadow: 0 0 0 3px rgba(33,150,243,.18); }

.legend { margin:6px 0 2px; font-size:.86rem; color:#4b5f74; }

@media (max-width: 820px) { .scale7 { grid-template-columns: repeat(2, minmax(0, 1fr)); } .pill .lab{ font-size:.8rem; } }

/* Image gallery – enhanced cards */
.image-choices { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 24px; margin-top: 16px; margin-bottom: 20px; }

.img-block { --accent:#2196f3; position: relative; background: #fff; border: 1px solid #e6edf6; border-radius: 18px; padding: 12px; box-shadow: 0 10px 24px rgba(16,69,124,.06); transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease; display: flex; flex-direction: column; align-items: center; }
.img-block:hover { box-shadow: 0 16px 36px rgba(16,69,124,.08); }
.img-block.selected { border-color: var(--accent); box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 25%, transparent), 0 14px 28px rgba(16,69,124,.14); background: linear-gradient(180deg,#ffffff, #f9fbfe); }
.img-block.selected::after { content: "✓"; position: absolute; top: 10px; right: 10px; width: 26px; height: 26px; border-radius: 50%; background: var(--accent); color: #fff; display:flex; align-items:center; justify-content:center; font-weight: 700; box-shadow: 0 2px 8px rgba(0,0,0,.15); }

/* photo */
.image-choices img, .img-photo { width: 100%; aspect-ratio: 4 / 5; height: auto; border-radius: 12px; object-fit: cover; object-position: center top; background: linear-gradient(180deg,#eef3f8,#fafcff); box-shadow: 0 2px 8px rgba(0,0,0,.06); pointer-events: none; user-select: none; }

.label { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; min-height: 2.4em; margin-top: 12px; font-size: 1rem; color: #0f2338; font-weight: 700; text-align: center; }

/* segmented like/neutral/dislike with colors */
.img-like-btns { display: flex; width: 100%; gap: 8px; border: 1px solid #deebf7; background: #f7fbff; border-radius: 999px; padding: 6px; margin-top: 12px; }
.img-like-btn { flex: 1; border: 0; background: transparent; border-radius: 999px; padding: 10px 12px; cursor: pointer; font-size: .9rem; font-weight: 700; color: #35526d; transition: background .15s ease, color .15s ease, transform .03s ease; outline: none; }
.img-like-btn:hover { background: #eef5ff; }
.img-like-btn.selected { color: #fff; box-shadow: 0 2px 8px rgba(0,0,0,.15); }
.img-like-btn.like.selected { background: #16a34a; }
.img-like-btn.neutral.selected { background: #64748b; }
.img-like-btn.dislike.selected { background: #ef4444; }

/* card accents by sentiment */
.img-block.sent-like { --accent:#16a34a; }
.img-block.sent-neutral { --accent:#64748b; }
.img-block.sent-dislike { --accent:#ef4444; }

/* keyboard focus ring on card */
.img-block:focus-visible { outline: 3px solid #99c9ff; outline-offset: 2px; }

/* Results modal */
.modal { position: fixed; inset: 0; background: rgba(0,0,0,.4); display: none; align-items: center; justify-content: center; z-index: 9999; }
.modal.show { display: flex; }
.modal-card { width: min(720px, 92vw); background: #fff; border-radius: 14px; box-shadow: 0 10px 30px rgba(0,0,0,.15); padding: 20px 22px; }
.modal-card h3 { margin: 0 0 8px; font-size: 1.3rem; }
.trait { display: grid; grid-template-columns: 150px 1fr auto; gap: 8px; align-items: center; margin: 8px 0; }
.bar { height: 10px; background: #e9eef5; border-radius: 6px; overflow: hidden; }
.bar > span { display: block; height: 100%; width: 0; background: #2196f3; }
.badge { font-size: .9rem; padding: 2px 8px; border-radius: 999px; background:#eef5ff; color:#1a5fb4; }
.modal-actions { display:flex; justify-content:flex-end; margin-top:14px; }
.scale-note { font-size: .9rem; color:#576b7f; margin-top: 6px; }
/* --- Responsive image grid --- */
@media (max-width: 1200px) { .container { padding: 24px 4vw 12px 4vw; } .image-choices img { width: 160px; height: 160px; } }
@media (max-width: 900px) { .image-choices { grid-template-columns: repeat(2, 1fr); gap: 22px; } .image-choices img { width: 140px; height: 140px; } }
@media (max-width: 600px) {
  .container { padding: 12px 1vw 10px 1vw; }
  .image-choices { grid-template-columns: 1fr; gap: 16px; }
  .image-choices img { width: 88vw; max-width: 340px; min-width: 140px; height: 48vw; min-height: 120px; max-height: 240px; }
  .img-block { padding: 14px 4vw 10px 4vw; }
}
@media (max-width: 370px) { .image-choices img { width: 96vw; height: 52vw; } }
